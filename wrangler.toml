name = "hawas-worker"
main = "src/worker/index.ts"
compatibility_date = "2023-10-30"

# D1 Database Binding
[[d1_databases]]
binding = "DB"
database_name = "hawas-db"
database_id = "99fe7a34-6c23-4757-b307-76abc65e5310"

# Cron Trigger for Daily Digest
[triggers]
crons = ["0 9 * * *"]  # Daily at 09:00 Africa/Cairo

[vars]
# Default variables
DEFAULT_GROUP_MODE = "chatty"
DEFAULT_GROUP_LANG = "ar"
AI_ENABLED_DEFAULT = "false"
TELEGRAM_ADMIN_IDS = "6856984764"

# CARV OAuth Configuration
OWNER_TELEGRAM_ID = "TELEGRAM_ADMIN_IDS"  # Replace with your Telegram user ID
CARV_REDIRECT_URL = "https://hawas-worker.hawas-alertai.workers.dev/auth/carv/callback"

# Secrets (add via `wrangler secret put <NAME>`)
# BOT_TOKEN
# DATABASE_URL (Supabase URL)
# SUPABASE_KEY (Supabase Anon/Service Role Key)
# GEMINI_API_KEY
# CARV_CLIENT_ID
# CARV_CLIENT_SECRET
# ENCRYPTION_SECRET (32-byte hex string for AES-256-GCM)
